{"version":3,"file":"searxng.head.min.js","sources":["../src/js/head/00_init.js"],"sourcesContent":["/* SPDX-License-Identifier: AGPL-3.0-or-later */\n(function (w, d) {\n  \"use strict\";\n\n  // add data- properties\n  var script =\n    d.currentScript ||\n    (function () {\n      var scripts = d.getElementsByTagName(\"script\");\n      return scripts[scripts.length - 1];\n    })();\n\n  w.searxng = {\n    settings: JSON.parse(atob(script.getAttribute(\"client_settings\"))),\n  };\n\n  // update the css\n  var hmtlElement = d.getElementsByTagName(\"html\")[0];\n  hmtlElement.classList.remove(\"no-js\");\n  hmtlElement.classList.add(\"js\");\n\n  var offlineBrowsingEnabled = w.searxng.settings[\"offline_browsing\"];\n\n  // enable service worker\n  if (\"serviceWorker\" in navigator) {\n    if (offlineBrowsingEnabled) {\n      navigator.serviceWorker\n        .register(\"/sw.js\", { scope: \"/\" })\n        .then(function (registration) {\n          registration.update();\n        })\n        .catch(function (error) {\n          console.log(`Service Worker registration failed with ${error}`);\n        });\n    } else {\n      navigator.serviceWorker.getRegistrations().then(function (registrations) {\n        for (let registration of registrations) {\n          if (registration.active) {\n            registration.active.postMessage('unregister');\n          } else {\n            registration.unregister();\n          }\n        }\n      });\n    }\n  }\n})(window, document);\n"],"names":["w","d","script","currentScript","scripts","getElementsByTagName","length","searxng","settings","JSON","parse","atob","getAttribute","hmtlElement","classList","remove","add","offlineBrowsingEnabled","navigator","serviceWorker","register","scope","then","registration","update","catch","error","console","log","getRegistrations","registrations","let","active","postMessage","unregister","window","document"],"mappings":"CACA,SAAWA,EAAGC,gBAIZ,IAAIC,EACFD,EAAEE,eACF,WACE,IAAIC,EAAUH,EAAEI,qBAAqB,UACrC,OAAOD,EAAQA,EAAQE,OAAS,GAFlC,GAKFN,EAAEO,QAAU,CACVC,SAAUC,KAAKC,MAAMC,KAAKT,EAAOU,aAAa,sBAIhD,IAAIC,EAAcZ,EAAEI,qBAAqB,QAAQ,GACjDQ,EAAYC,UAAUC,OAAO,SAC7BF,EAAYC,UAAUE,IAAI,MAE1B,IAAIC,EAAyBjB,EAAEO,QAAQC,SAAS,oBAGhD,GAAI,kBAAmBU,UAAW,CAChC,GAAID,EAAwB,CAC1BC,UAAUC,cACPC,SAAS,SAAU,CAAEC,MAAO,MAC5BC,KAAK,SAAUC,GACdA,EAAaC,WAEdC,MAAM,SAAUC,GACfC,QAAQC,+CAA+CF,WAEtD,CACLR,UAAUC,cAAcU,mBAAmBP,KAAK,SAAUQ,GACxD,IAAKC,IAAIR,KAAgBO,EAAe,CACtC,GAAIP,EAAaS,OAAQ,CACvBT,EAAaS,OAAOC,YAAY,kBAC3B,CACLV,EAAaW,oBAvCzB,CA6CGC,OAAQC"}